### 裸机开发

#### STC89C52RC:

8-8051内核芯片；9-内含Flash E2PROM存储器；C-该器件为CMOS产品；2-芯片内部程序空间大小为8KB；RC-内部RAM为512B；

6个中断源，INT0-外部中断0， T0-定时器/计数器0中断，INT1-外部中断1， T1-定时器/计数器1中断，TI/RI-串行口中断，T2-定时器/计数器2中断；

**寄存器**：PSW（程序状态寄存器），IE中断允许寄存器，TMOD（定时器/计数器工作方式寄存器），TCON（定时器/计数器控制寄存器），PCON（电源管理寄存器87H），SBUF（数据缓冲寄存器99H），SCON（串行口控制寄存器98H）

**串行口方式1**：10位数据的异步通信，1位起始位，8位数据位，1位停止位，低位在前高位在后，LSB先发，末位MSB。

数据写入SBUF-》从起始位开始发送数据（起始位为低）-》发送至第十位停止位时，内部硬件将TI（发送中断标志位）置1，可中断

软件置REN为1-》接收器采样RXD引脚电平-》RXD电平负跳变则为起始位，移入输入移位寄存器，开始接收其余位，前8位装入SBUF，第九位（停止位）进入SCON的RB8位

eg、上位机发送一个字符X，单片机收到后回复"I get X"。

1、init（）初始化，设置定时器T1，串口（接收、工作方式），开中断

2、while（1）等待标志位为1，接收中断函数置标志位为1，清接收中断标志位TI，接收寄存器中的数据X=SBUF，

3、清串口中断ES，for循环6次，SBUF=table[i]，逐个字节发送，每个发送后等待TI为1，发送完硬件自动置TI为1，再软件置TI为0，避免引发中断

4、发送接收到的X字符，SBUF=X，等传送完，置TI为0 ，开串口中断ES，置flag为0；

**模拟IIC总线通信**：数据线SDA在SCL为高电平时拉低起始，拉高则为终止，传输完一字节（地址、数据及命令）在SCL为高时SDA拉低应答。写数据，数据右移一位MSB，溢出至CY，SCL变低，SDA=CY传送一位，SCL再高电平，循环8次（一字节）。读数据，临时变量k=(k<<1)|SDA，循环8次，将8位存入一字节。



#### STM32F103RCT6（ARM Cortex-M3)

​		48KB  SRAM、256KB  FLASH、2个基本定时器、4个通用定时器、2个高级定时器、2个DMA控制器(12个通道)、3个12为ADC、1个12为DAC、3个SPI、2个IIC、5个串口、1个USB、1个CAN、1个SDIO接口及51个通用IO。

串口：串口状态寄存器SR--RENE位置一，读数据寄存器DR非空，即数据收到，读DR可使RENE置0；TC位置1，则发送完成，读SR，写DR或写该位可使TC置0。

**SPI**:串行外围设备接口，全双工串行同步通信，四线-MISO、MOSI、SCLK及CS，可设置LSB或MSB先发，串行同步时钟极性设置(CPOL)空闲状态下的电平（0低1高），相位设置(CPHA)在第一跳变沿采样（则后沿改变数据）或第二跳变沿采样数据（则前沿改变数据），主从间的相位和极性应当一致

**DMA**：直接存储器访问，无需CPU控制传输，通过硬件为RAM与I/O设备提供直接传送数据的通路。





###### 虚拟内存：

所需内存空间大于实际的物理内存空间时，将部分硬盘空间模拟成内存空间，将暂不运行的程序和不使用的数据存储在硬盘上，需要时再将其存入内存中

##### RAM 、ROM

随机存储器，速度快，断电丢失数据，用作内存；只读存储器，速度较慢，不能与CPU直接交互，断电后不丢失数据

##### 大小端各自优点

大端：符号位在低地址的第一个字节中，便于快速判断数据的正负和大小,大位在开端

小端：CPU做数值运算时是从内存的低位到高位取数据进行运算，运行效率高，且强制转换数据是不需要调整字节内容，小位在开端

